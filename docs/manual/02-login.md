# 第2章: ログイン・ログアウト

このドキュメントでは、従業員管理システムのログイン・ログアウト機能の使い方を説明します。

## 2.1 初回アクセス

### 2.1.1 アプリケーションへのアクセス

アプリケーション起動時に最初に表示されるのがログイン画面です。

1. Webブラウザを開きます
2. アプリケーションのURLにアクセスします（通常は `https://localhost:7000`）
3. ログイン画面が自動的に表示されます

### 2.1.2 ログイン画面の構成

ログイン画面には以下の要素が表示されます：

- **ヘッダー**: 「ログイン」というタイトルとアイコン
- **説明文**: 「従業員管理システムにログインしてください」
- **ユーザー名またはメールアドレス入力欄**: ログイン用のユーザー名またはメールアドレスを入力
- **パスワード入力欄**: パスワードを入力（入力内容は●で表示されます）
- **ログインボタン**: クリックするとログイン処理が実行されます
- **テストユーザー選択**: 開発・検証用のテストユーザー情報が表示されます

## 2.2 ログイン手順

### 2.2.1 通常のログイン

1. **ユーザー名またはメールアドレス**欄に、あなたのユーザー名またはメールアドレスを入力します
2. **パスワード**欄に、あなたのパスワードを入力します
3. **ログイン**ボタンをクリックします
4. 認証が成功すると、画面右上に「ようこそ、[ユーザー名]さん！」というメッセージが表示されます
5. ホーム画面に自動的に遷移します

### 2.2.2 テストユーザーでのログイン

開発・検証環境では、以下のテストユーザーを使用できます：

#### 一般ユーザー（Userロール）
- **ユーザー名**: `testuser`
- **パスワード**: `Password123!`
- **権限**: 従業員情報の閲覧のみ可能

#### 管理者ユーザー（Adminロール）
- **ユーザー名**: `admin`
- **パスワード**: `Admin123!`
- **権限**: 従業員情報の閲覧、作成、更新、削除が可能

**テストユーザーの簡単ログイン手順:**

1. ログイン画面下部の「テストユーザー:」セクションを確認します
2. 使用したいユーザー名のチップ（`testuser` または `admin`）をクリックします
3. ユーザー名とパスワードが自動的に入力されます
4. **ログイン**ボタンをクリックします

> **注意**: テストユーザーは開発・検証環境専用です。本番環境では使用できません。

### 2.2.3 テストユーザーと実ユーザーの違い

| 項目 | テストユーザー | 実ユーザー |
|------|---------------|-----------|
| **作成方法** | システム起動時に自動作成 | 管理者が手動で作成 |
| **パスワード** | 固定（公開されている） | 個別に設定 |
| **用途** | 開発・検証・デモ | 実際の業務利用 |
| **環境** | 開発環境のみ | すべての環境 |
| **セキュリティ** | 低（誰でも知っている） | 高（本人のみ知っている） |

## 2.3 ログイン処理中

ログインボタンをクリックすると、以下の状態になります：

- ログインボタンが「ログイン中...」と表示されます
- ローディングアイコン（回転する円）が表示されます
- 入力欄とボタンが無効化され、操作できなくなります

通常、ログイン処理は数秒以内に完了します。

## 2.4 ログイン成功後

ログインに成功すると：

1. 画面右上に成功メッセージが表示されます
   - 「ようこそ、[ユーザー名]さん！」（緑色の通知）
2. ホーム画面（ダッシュボード）に自動的に遷移します
3. 左側のナビゲーションメニューに、ログインユーザー名が表示されます
4. 「ログアウト」メニューが表示されます

### ログイン後に利用できる機能

- **ホーム**: システムの概要
- **ダッシュボード**: 各種統計情報
- **従業員管理**: 従業員情報の閲覧（管理者は編集も可能）
- **勤怠管理**: 勤怠情報の管理
- **通知管理**: システム通知の確認

## 2.5 ログアウト方法

### 2.5.1 通常のログアウト

1. 画面左側のナビゲーションメニューを開きます（画面左上のメニューアイコン≡をクリック）
2. メニュー下部の「ログアウト」をクリックします
3. ログアウトが実行され、ホーム画面に遷移します
4. 認証が必要なページにアクセスしようとすると、ログイン画面に戻ります

### 2.5.2 ログアウト後の状態

ログアウト後は：

- すべての認証情報がクリアされます
- 保護されたページにはアクセスできなくなります
- 再度ログインが必要になります

> **推奨**: 共有PCを使用している場合や、作業終了時には必ずログアウトしてください。

## 2.6 エラー時の対応

### 2.6.1 ログインエラーの種類と対処法

#### エラー1: 「ユーザー名またはパスワードが正しくありません」

**原因:**
- ユーザー名またはパスワードの入力間違い
- 大文字・小文字の入力ミス
- 余分なスペースの入力

**対処法:**
1. 入力内容を確認してください
2. Caps Lockキーがオンになっていないか確認してください
3. ユーザー名とパスワードを再度正確に入力してください
4. それでもログインできない場合は、システム管理者に連絡してください

#### エラー2: 「ログイン処理中にエラーが発生しました」

**原因:**
- ネットワーク接続の問題
- サーバーが応答していない
- システムメンテナンス中

**対処法:**
1. ネットワーク接続を確認してください
2. ページを再読み込み（F5キー）してください
3. しばらく待ってから再度試してください
4. 問題が解決しない場合は、システム管理者に連絡してください

#### エラー3: ログインボタンがクリックできない

**原因:**
- 必須項目が未入力
- フォームのバリデーションエラー

**対処法:**
1. すべての入力欄が正しく入力されているか確認してください
2. エラーメッセージ（赤色の文字）が表示されている場合は、その指示に従ってください

### 2.6.2 一般的なトラブルシューティング

#### 症状: ログイン画面が表示されない

**対処法:**
1. URLが正しいか確認してください
2. ブラウザのキャッシュをクリアしてください（Ctrl+Shift+Delete）
3. 別のブラウザで試してください
4. システム管理者に連絡してください

#### 症状: ログイン後すぐにログアウトされる

**原因:**
- ブラウザのCookieが無効になっている
- セッションタイムアウトの設定が短すぎる

**対処法:**
1. ブラウザのCookie設定を確認し、有効化してください
2. プライベートブラウジングモード（シークレットモード）を使用している場合は、通常モードで試してください
3. システム管理者に連絡してください

#### 症状: パスワードを忘れた

**現在の対処法:**

> **注意**: 現在のバージョンでは、パスワードリセット機能は実装されていません。

**対処方法:**
1. システム管理者に連絡してください
2. 管理者が新しいパスワードを設定します
3. 新しいパスワードでログインしてください
4. ログイン後、すぐにパスワードを変更することをお勧めします

**将来の機能:**
- パスワードリセット機能（メール経由）
- セキュリティ質問による本人確認
- 二要素認証（2FA）

## 2.7 セキュリティのベストプラクティス

### 2.7.1 パスワードの管理

- **強力なパスワードを使用する**: 8文字以上、大文字・小文字・数字・記号を含む
- **パスワードを他人と共有しない**: 家族や同僚にも教えない
- **定期的にパスワードを変更する**: 3ヶ月に1回程度
- **同じパスワードを使い回さない**: 他のサービスと異なるパスワードを使用

### 2.7.2 セキュアなログイン

- **公共のPCでは注意**: ログアウトを忘れない
- **HTTPS接続を確認**: URLが `https://` で始まることを確認
- **不審なログイン画面に注意**: フィッシング詐欺に注意
- **離席時はロック**: 長時間離席する場合は画面をロック

## 2.8 よくある質問（FAQ）

### Q1: テストユーザーでログインできない場合は？

**A**: 以下を確認してください：
- パスワードの大文字・小文字が正しいか（`Password123!` または `Admin123!`）
- システムが正常に起動しているか
- 開発環境で実行しているか（テストユーザーは開発環境専用）

### Q2: 複数のタブで同時にログインできますか？

**A**: はい、できます。同じブラウザの複数のタブで同時にログインして使用できます。

### Q3: 自動ログアウトの時間は？

**A**: 現在のバージョンでは、明示的にログアウトしない限り、セッションは継続します。セキュリティのため、作業終了時には必ずログアウトしてください。

### Q4: ログイン履歴は記録されますか？

**A**: はい、システムログにログイン情報が記録されます。システム管理者は監査のためにこの情報を確認できます。

## 2.9 次のステップ

ログインが完了したら、以下のドキュメントを参照して、システムの使い方を学んでください：

- **第3章: ダッシュボードの使い方**（予定）
- **第4章: 従業員情報の管理**（予定）
- **第5章: 勤怠管理機能**（予定）

---

## 関連ドキュメント

- [Getting Started](../getting-started.md) - 開発環境のセットアップ
- [認可実装ガイド](../authorization-implementation.md) - 技術的な認証・認可の詳細
- [開発ガイド](../development-guide.md) - 開発者向け情報

## サポート

質問や問題がある場合は、以下の方法でサポートを受けられます：

- システム管理者に連絡
- GitHubのIssueで報告
- 開発チームへの問い合わせ

---

最終更新日: 2025-11-10
