# 第6章: 勤怠管理

## 概要

勤怠管理画面では、従業員の勤怠記録を確認・集計することができます。期間や従業員を指定して勤怠情報を検索したり、月次の集計結果を表示したりすることが可能です。

**アクセス方法**: メインメニューから「勤怠管理」を選択、またはURLで `/attendances` にアクセス

## 主な機能

勤怠管理画面では、以下の機能を利用できます：

1. **勤怠履歴の検索・表示**
   - 期間を指定して勤怠記録を絞り込み
   - 特定の従業員または全従業員の勤怠を表示
   
2. **月次集計の表示**
   - 出勤日数、総勤務時間、平均勤務時間、遅刻回数の確認

3. **勤怠情報の詳細表示**
   - 日付、出勤時刻、退勤時刻、勤務時間、勤怠種別、備考

## 画面構成

勤怠管理画面は、以下の3つのセクションで構成されています：

### 1. 検索フィルタ

画面上部に配置されており、勤怠記録を絞り込むための条件を指定できます。

### 2. 月次集計表示（従業員選択時のみ）

特定の従業員を選択している場合に表示され、月単位の勤怠集計を確認できます。

### 3. 勤怠履歴一覧

検索条件に基づいた勤怠記録が一覧表示されます。

## 勤怠情報の検索方法

### 従業員の選択

1. **全従業員の勤怠を表示する場合**
   - 「従業員を選択」ドロップダウンで「全員」を選択します
   - すべての従業員の勤怠記録が表示されます

2. **特定の従業員の勤怠を表示する場合**
   - 「従業員を選択」ドロップダウンから対象の従業員を選択します
   - 選択した従業員の勤怠記録のみが表示されます
   - 月次集計機能も利用可能になります

### 期間の指定

1. **開始日の設定**
   - 「開始日」フィールドをクリックしてカレンダーを開きます
   - 検索したい期間の開始日を選択します
   - デフォルトでは1ヶ月前の日付が設定されています

2. **終了日の設定**
   - 「終了日」フィールドをクリックしてカレンダーを開きます
   - 検索したい期間の終了日を選択します
   - デフォルトでは本日の日付が設定されています

3. **期間指定のヒント**
   - 開始日と終了日の両方を指定することで、その期間内の勤怠記録が表示されます
   - より短い期間を指定することで、検索結果が高速に表示されます
   - 長期間のデータを確認したい場合は、期間を広げて検索してください

### 検索の実行

1. 従業員と期間の条件を設定したら、「検索」ボタンをクリックします
2. 設定した条件に基づいて勤怠記録が一覧に表示されます
3. 検索中は読み込み中のインジケーターが表示されます

## 勤怠履歴一覧の見方

検索結果は表形式で表示され、以下の情報を確認できます：

| 列名 | 説明 | 表示例 |
|------|------|--------|
| **日付** | 勤務日 | 2024/01/15 |
| **従業員** | 従業員名（姓名） | 山田 太郎 |
| **出勤時刻** | 出勤時刻（時:分） | 09:00 |
| **退勤時刻** | 退勤時刻（時:分） | 18:00 |
| **勤務時間** | 勤務時間（時間単位） | 9.0 時間 |
| **種別** | 勤怠の種別 | 通常勤務 |
| **備考** | 追加情報やメモ | （必要に応じて表示） |

### 勤怠種別の種類

勤怠記録には以下の種別があります：

- **通常勤務**: 通常のオフィス勤務
- **リモート**: リモートワーク・在宅勤務
- **出張**: 出張時の勤務
- **半日勤務**: 半日のみの勤務

### ページネーション機能

- 勤怠記録が多い場合、ページ分割されて表示されます
- 表の下部にあるページネーションコントロールで、表示件数やページを切り替えられます
- 1ページあたり10件、25件、50件、100件から選択できます

## 月次集計の使い方

特定の従業員を選択している場合、月次の勤怠集計を表示できます。

### 集計の表示手順

1. **従業員の選択**
   - 「従業員を選択」ドロップダウンで特定の従業員を選択します
   - 「全員」のままでは月次集計は利用できません

2. **対象年月の指定**
   - 「年」フィールドに集計したい年を入力します（例: 2024）
   - 「月」フィールドに集計したい月を入力します（1〜12）
   - デフォルトでは現在の年月が設定されています

3. **集計の実行**
   - 「集計表示」ボタンをクリックします
   - 指定した年月の集計結果が表示されます

### 集計項目の説明

月次集計では、以下の4つの指標が表示されます：

#### 1. 出勤日数
- **説明**: 指定した月に実際に勤務した日数
- **計算方法**: 勤怠記録が存在する日数をカウント
- **用途**: 月間の実働日数を確認

#### 2. 総勤務時間
- **説明**: 指定した月の総勤務時間（時間単位）
- **計算方法**: 各日の勤務時間を合計
- **表示形式**: 小数点第1位まで表示（例: 160.0 時間）
- **用途**: 月間の総労働時間を確認

#### 3. 平均勤務時間
- **説明**: 1日あたりの平均勤務時間
- **計算方法**: 総勤務時間 ÷ 出勤日数
- **表示形式**: 小数点第1位まで表示（例: 8.0 時間/日）
- **用途**: 日々の労働時間が適切かを確認

#### 4. 遅刻回数
- **説明**: 遅刻とみなされた日数
- **判定基準**: 9:00以降に出勤した日をカウント
- **用途**: 勤怠の規律性を確認

## 活用シーンと使い方のヒント

### シーン1: 自分の勤怠を確認する

**目的**: 自分の出退勤記録と勤務時間を確認したい

**手順**:
1. 従業員選択で自分の名前を選択
2. 確認したい期間（例: 今月1日〜今日）を設定
3. 「検索」ボタンをクリック
4. 勤怠履歴一覧で日々の記録を確認

### シーン2: 月次の勤務実績を確認する

**目的**: 今月の総勤務時間や出勤日数を確認したい

**手順**:
1. 従業員選択で自分の名前を選択
2. 月次集計セクションで年月を指定（例: 2024年1月）
3. 「集計表示」ボタンをクリック
4. 出勤日数、総勤務時間などの集計結果を確認

### シーン3: チームメンバーの勤怠を確認する（管理者向け）

**目的**: 部下やチームメンバーの勤怠状況を把握したい

**手順**:
1. 「従業員を選択」で確認したいメンバーを選択
2. 適切な期間を設定（例: 先月1日〜末日）
3. 「検索」ボタンをクリック
4. 勤怠履歴や月次集計で勤務状況を確認

### シーン4: 全体の勤怠状況を確認する（管理者向け）

**目的**: 組織全体の勤怠状況を一覧で確認したい

**手順**:
1. 「従業員を選択」で「全員」を選択
2. 確認したい期間を設定
3. 「検索」ボタンをクリック
4. 全従業員の勤怠記録が日付順に表示されます

## よくある質問（FAQ）

### Q1: 勤怠記録が表示されない

**A**: 以下の点を確認してください：
- 正しい従業員を選択していますか？
- 期間設定は適切ですか？（開始日が終了日より前になっているか）
- その期間に実際に勤怠記録が存在しますか？

### Q2: 月次集計が表示されない

**A**: 月次集計を表示するには：
- 特定の従業員を選択している必要があります（「全員」では表示されません）
- 年と月を正しく入力し、「集計表示」ボタンをクリックしてください

### Q3: 勤務時間の計算方法は？

**A**: 勤務時間は以下のように計算されます：
- 退勤時刻 - 出勤時刻 = 勤務時間
- 休憩時間は現在の仕様では考慮されていません
- 表示は小数点第1位まで（例: 8.5時間）

### Q4: 過去のデータはどこまで遡れますか？

**A**: 
- 技術的には制限はありませんが、データが保存されている期間内でのみ検索可能です
- 大量のデータを検索する場合は、適切な期間を指定することで検索速度が向上します

### Q5: 勤怠記録を編集・削除できますか？

**A**: 
- 現在のバージョンでは、勤怠管理画面から直接編集・削除はできません
- 記録の修正が必要な場合は、システム管理者に問い合わせてください

## 注意事項

### データの正確性について
- 勤怠記録は出退勤の記録に基づいて自動的に計算されます
- 記録の漏れや誤りがある場合は、適切に修正する必要があります

### 権限について
- 一般ユーザーは自分の勤怠記録のみ参照できます
- 管理者権限を持つユーザーは、全従業員の勤怠記録を参照できます

### パフォーマンスについて
- 長期間のデータや全従業員のデータを一度に検索すると、表示に時間がかかる場合があります
- 効率的に利用するため、適切な期間や従業員を絞り込んで検索することをお勧めします

## 関連情報

### 参照ドキュメント
- [勤怠管理サービス技術仕様](../attendance-service.md) - 開発者向け技術情報
- [Aspireダッシュボード](../aspire-dashboard.md) - システム監視とトラブルシューティング

### サポート
- 不明な点や問題がある場合は、システム管理者までお問い合わせください
- 技術的な詳細については、開発チームにご相談ください

---

**改訂履歴**
- 2024-11-10: 初版作成
