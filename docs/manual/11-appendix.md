# 第11章: 付録

本章では、従業員管理システムを利用する際に参考となる用語解説、権限一覧、通知タイプ、および問い合わせ窓口について説明します。

---

## 11.1 主要用語解説

### システム用語

#### **従業員管理システム (Employee Management System)**
従業員の基本情報、勤怠記録、休暇申請などを一元管理するWebアプリケーションシステムです。

#### **マイクロサービスアーキテクチャ**
システムを小さな独立したサービス（従業員サービス、認証サービス、通知サービスなど）に分割して構築する設計手法です。各サービスは独立して動作し、相互に連携します。

#### **Aspire ダッシュボード**
システムの監視や管理を行うための管理画面です。各サービスの稼働状況、ログ、パフォーマンスなどをリアルタイムで確認できます。

#### **クリーンアーキテクチャ**
ビジネスロジックとインフラストラクチャを分離し、保守性と拡張性を高める設計パターンです。

### 従業員管理用語

#### **従業員ID (Employee ID)**
システム内で従業員を一意に識別するためのID（GUID形式）です。

#### **部署 (Department)**
従業員が所属する組織の部門です（例: 開発部、営業部、人事部）。

#### **役職 (Position)**
従業員の職位や役割を表します（例: エンジニア、マネージャー、アシスタント）。

#### **雇用形態 (Employment Type)**
雇用の形態を示します（例: 正社員、契約社員、パートタイム）。

### 勤怠管理用語

#### **出勤 (Check-in)**
従業員が勤務を開始した時刻を記録することです。

#### **退勤 (Check-out)**
従業員が勤務を終了した時刻を記録することです。

#### **勤務時間 (Work Hours)**
出勤時刻から退勤時刻までの実労働時間です。休憩時間は自動的に差し引かれます。

#### **総出勤日数 (Total Work Days)**
指定期間内で実際に勤務した日数の合計です。

#### **平均勤務時間 (Average Work Hours)**
指定期間内の1日あたりの平均勤務時間です。

#### **遅刻 (Late Arrival)**
標準出勤時刻（9:00）より後に出勤した場合を指します。

#### **勤怠レコード (Attendance Record)**
ある日の出退勤情報を含む記録です。出勤時刻、退勤時刻、勤務時間などが含まれます。

### 休暇管理用語

#### **有給休暇 (Paid Leave)**
給与が支払われる休暇です。

#### **病気休暇 (Sick Leave)**
病気や怪我により休む場合の休暇です。

#### **特別休暇 (Special Leave)**
慶弔や公的な理由で取得する休暇です。

#### **休暇申請 (Leave Request)**
休暇を取得するための申請です。承認者による承認が必要です。

#### **承認ステータス (Approval Status)**
休暇申請の状態を示します：
- **Pending**: 承認待ち
- **Approved**: 承認済み
- **Rejected**: 却下
- **Cancelled**: キャンセル済み

### 認証・セキュリティ用語

#### **ユーザー名 (Username)**
システムにログインする際に使用する識別子です。

#### **パスワード (Password)**
認証のための秘密の文字列です。

#### **ロール (Role)**
ユーザーの権限レベルを定義します（管理者、一般ユーザー）。

#### **認証 (Authentication)**
ユーザーが本人であることを確認するプロセスです。

#### **認可 (Authorization)**
認証されたユーザーが特定の操作を実行できるかどうかを判断するプロセスです。

#### **セッション (Session)**
ログインしてからログアウトするまでの接続期間です。

### 通知用語

#### **通知 (Notification)**
システムから従業員への情報伝達メッセージです。主にメール形式で送信されます。

#### **イベント駆動通知 (Event-Driven Notification)**
従業員の登録、更新、削除などのイベントが発生した際に自動的に送信される通知です。

#### **手動通知 (Manual Notification)**
管理者が任意のタイミングで従業員に送信する通知です。

#### **通知ステータス (Notification Status)**
通知の送信状態を示します：
- **Pending**: 送信待ち
- **Sent**: 送信済み
- **Failed**: 送信失敗

---

## 11.2 権限ロール一覧

従業員管理システムでは、2つの主要なロールが定義されています。各ロールによって操作できる範囲が異なります。

### ロールの種類

#### **Admin（管理者）**

**概要:**  
システムの全機能にアクセスでき、すべての管理操作を実行できる最高権限のロールです。

**主な権限:**
- ✅ 従業員情報の閲覧
- ✅ 従業員の新規登録
- ✅ 従業員情報の編集・更新
- ✅ 従業員の削除
- ✅ 勤怠記録の閲覧（全従業員）
- ✅ 勤怠記録の登録・編集
- ✅ 休暇申請の閲覧（全従業員）
- ✅ 休暇申請の承認・却下
- ✅ 通知の送信（手動通知）
- ✅ 通知履歴の閲覧
- ✅ システム設定の変更
- ✅ ユーザー管理

**デフォルトアカウント:**
- ユーザー名: `admin`
- パスワード: `Admin123!`

**使用例:**
- 人事部門の担当者
- システム管理者
- 部門マネージャー

---

#### **User（一般ユーザー）**

**概要:**  
基本的な閲覧権限を持つ標準ロールです。自分自身の情報の閲覧と一部の操作が可能です。

**主な権限:**
- ✅ 従業員情報の閲覧（読み取り専用）
- ✅ 自分の勤怠記録の閲覧
- ✅ 自分の出退勤記録の登録
- ✅ 自分の休暇申請の作成・閲覧
- ✅ 自分が受信した通知の閲覧
- ❌ 他の従業員の情報編集（不可）
- ❌ 従業員の新規登録（不可）
- ❌ 従業員の削除（不可）
- ❌ 他の従業員の勤怠編集（不可）
- ❌ 休暇申請の承認・却下（不可）
- ❌ 手動通知の送信（不可）

**デフォルトアカウント:**
- ユーザー名: `testuser`
- パスワード: `Password123!`

**使用例:**
- 一般従業員
- 閲覧のみを行うユーザー

---

### ロール別機能マトリックス

| 機能 | Admin | User |
|------|:-----:|:----:|
| **従業員管理** | | |
| 従業員一覧の閲覧 | ✅ | ✅ |
| 従業員詳細の閲覧 | ✅ | ✅ |
| 従業員の新規登録 | ✅ | ❌ |
| 従業員情報の編集 | ✅ | ❌ |
| 従業員の削除 | ✅ | ❌ |
| **勤怠管理** | | |
| 全従業員の勤怠閲覧 | ✅ | ❌ |
| 自分の勤怠閲覧 | ✅ | ✅ |
| 出勤記録の登録 | ✅ | ✅ |
| 退勤記録の登録 | ✅ | ✅ |
| 他人の勤怠編集 | ✅ | ❌ |
| 月次勤怠集計の閲覧 | ✅ | ✅（自分のみ） |
| **休暇管理** | | |
| 全従業員の休暇閲覧 | ✅ | ❌ |
| 自分の休暇閲覧 | ✅ | ✅ |
| 休暇申請の作成 | ✅ | ✅ |
| 休暇申請の承認・却下 | ✅ | ❌ |
| 休暇申請のキャンセル | ✅ | ✅（自分のみ） |
| **通知管理** | | |
| 通知履歴の閲覧（全件） | ✅ | ❌ |
| 自分の通知閲覧 | ✅ | ✅ |
| 手動通知の送信 | ✅ | ❌ |
| **システム管理** | | |
| ユーザー管理 | ✅ | ❌ |
| ロール割り当て | ✅ | ❌ |
| システム設定 | ✅ | ❌ |

---

### 管理者と一般ユーザーの違い

#### **主要な違い**

1. **編集権限の有無**
   - **Admin**: すべての従業員情報を作成・編集・削除できます
   - **User**: 閲覧のみ可能で、編集権限はありません

2. **他人の情報へのアクセス**
   - **Admin**: 全従業員の勤怠・休暇情報を閲覧・管理できます
   - **User**: 自分自身の情報のみ閲覧・操作できます

3. **承認権限**
   - **Admin**: 休暇申請の承認・却下が可能です
   - **User**: 承認権限はなく、申請のみ可能です

4. **通知機能**
   - **Admin**: 任意の従業員に手動通知を送信できます
   - **User**: システムからの自動通知を受信するのみです

5. **UI表示の違い**
   - **Admin**: 「従業員を追加」ボタン、「編集」ボタンなどが表示されます
   - **User**: 編集・削除関連のボタンは表示されません

#### **セキュリティ上の考慮事項**

- **多層防御**: UIレイヤーとAPIレイヤーの両方で権限チェックを実施しています
- **最小権限の原則**: 新規ユーザーはデフォルトでUserロールが割り当てられます
- **エラーレスポンス**: 
  - 未認証: `401 Unauthorized`
  - 権限不足: `403 Forbidden`

---

## 11.3 通知タイプ一覧

システムは複数の通知タイプをサポートしています。各通知は特定のイベントやアクションに応じて自動または手動で送信されます。

### 通知タイプ

#### **1. EmployeeCreated（従業員作成通知）**

**概要:**  
新しい従業員が登録された際に自動的に送信されるウェルカム通知です。

**送信タイミング:**  
管理者が従業員を新規登録した直後

**送信先:**  
新規登録された従業員のメールアドレス

**通知内容（例）:**
```
件名: ようこそ！従業員登録が完了しました

山田 太郎 様

従業員管理システムへようこそ！
あなたの従業員情報が正常に登録されました。

【登録情報】
- 氏名: 山田 太郎
- メールアドレス: yamada.taro@example.com
- 部署: 開発部
- 役職: エンジニア
- 登録日: 2025年11月09日 14:30

今後ともよろしくお願いいたします。

従業員管理システム
```

**発生条件:**
- 管理者が「従業員を追加」ボタンから新規登録を完了
- APIエンドポイント `POST /api/employees` が成功

---

#### **2. EmployeeUpdated（従業員更新通知）**

**概要:**  
従業員情報が更新された際に送信される通知です。

**送信タイミング:**  
管理者が従業員情報を編集・更新した直後

**送信先:**  
更新対象の従業員のメールアドレス

**通知内容（例）:**
```
件名: 従業員情報が更新されました

山田 太郎 様

あなたの従業員情報が更新されました。

【更新内容】
- 部署: 開発部 → 営業部
- 役職: エンジニア → シニアエンジニア
- 更新日時: 2025年11月09日 15:45

変更内容に誤りがある場合は、システム管理者までお問い合わせください。

従業員管理システム
```

**発生条件:**
- 管理者が従業員情報を編集して保存
- APIエンドポイント `PUT /api/employees/{id}` が成功

---

#### **3. EmployeeDeleted（従業員削除通知）**

**概要:**  
従業員がシステムから削除された際に送信される通知です。

**送信タイミング:**  
管理者が従業員を削除した直後

**送信先:**  
削除対象の従業員のメールアドレス

**通知内容（例）:**
```
件名: 従業員情報が削除されました

山田 太郎 様

従業員管理システムから、あなたの従業員情報が削除されました。

【削除情報】
- 氏名: 山田 太郎
- メールアドレス: yamada.taro@example.com
- 削除日時: 2025年11月09日 16:20

これは退職処理または管理上の理由によるものです。
ご不明な点がある場合は、人事部までお問い合わせください。

従業員管理システム
```

**発生条件:**
- 管理者が従業員を削除
- APIエンドポイント `DELETE /api/employees/{id}` が成功

---

#### **4. Manual（手動通知）**

**概要:**  
管理者が任意のタイミングで従業員に送信するカスタム通知です。

**送信タイミング:**  
管理者が「通知管理」ページから手動で送信

**送信先:**  
管理者が選択した従業員のメールアドレス

**通知内容（例）:**
```
件名: 【重要】システムメンテナンスのお知らせ

山田 太郎 様

いつも従業員管理システムをご利用いただき、ありがとうございます。

下記の日程でシステムメンテナンスを実施いたします。

【メンテナンス日時】
2025年11月15日（土）22:00 ～ 11月16日（日）02:00

この間、システムはご利用いただけません。
ご不便をおかけしますが、何卒ご理解とご協力をお願いいたします。

従業員管理システム 管理者
```

**発生条件:**
- 管理者が「通知管理」ページで従業員を選択
- 件名とメッセージを入力して「通知を送信」ボタンをクリック
- APIエンドポイント `POST /api/notifications` を呼び出し

---

### 通知の送信フロー

```
[イベント発生] → [通知作成] → [キューに保存] → [送信処理] → [ステータス更新]
                 (Status: Pending)            (10秒間隔)    (Status: Sent/Failed)
```

1. **イベント発生**: 従業員の作成、更新、削除などのイベントが発生
2. **通知作成**: 通知エンティティが作成され、ステータスは `Pending`（送信待ち）
3. **キューに保存**: データベースに通知が保存される
4. **送信処理**: バックグラウンドワーカーが10秒間隔でPending通知を処理
5. **ステータス更新**: 
   - 成功時: `Sent`（送信済み）
   - 失敗時: `Failed`（送信失敗）、再試行カウントを増加

---

### 通知ステータス

| ステータス | 説明 | アクション |
|-----------|------|----------|
| **Pending** | 送信待ち | バックグラウンドワーカーが自動処理 |
| **Sent** | 送信済み | 完了（追加アクションなし） |
| **Failed** | 送信失敗 | エラーログ確認、再試行可能 |

---

### 通知の確認方法

#### **管理者の場合:**
1. ナビゲーションメニューから「通知管理」をクリック
2. 「通知履歴」タブで全従業員の通知履歴を確認
3. フィルタリング機能で特定の従業員や期間を絞り込み

#### **一般ユーザーの場合:**
1. 自分が受信した通知のみ閲覧可能
2. 実際の通知はメールで受信（開発環境ではコンソールログに出力）

---

## 11.4 操作範囲・制限事項

### データ制限

#### **従業員情報**
- **氏名**: 最大100文字
- **メールアドレス**: 有効なメール形式、最大255文字、重複不可
- **電話番号**: 数字とハイフン、最大20文字
- **部署名**: 最大50文字
- **役職名**: 最大50文字

#### **勤怠記録**
- **出勤時刻**: 退勤時刻より前である必要があります
- **退勤時刻**: 出勤時刻より後である必要があります
- **勤務時間**: 0〜24時間の範囲
- **勤怠記録の遡及**: 過去90日まで記録可能
- **遅刻判定**: 標準出勤時刻（9:00）以降の出勤を遅刻としてカウント

#### **休暇申請**
- **申請期間**: 最大30日間まで連続申請可能
- **申請期限**: 休暇開始日の3日前まで（ただし、病気休暇は当日可能）
- **承認期限**: 休暇開始日の前日まで

#### **通知**
- **件名**: 最大200文字
- **メッセージ本文**: 最大2000文字
- **送信制限**: 管理者のみ、1日100件まで（スパム防止）

### 技術的制限

#### **データベース**
- **開発環境**: SQLiteを使用（同時接続数に制限あり）
- **本番環境**: Azure SQL Database推奨（スケーラビリティ向上）
- **トランザクション**: 複数ユーザーの同時編集は楽観的並行性制御で管理

#### **パフォーマンス**
- **APIレスポンス**: 通常3秒以内
- **ページネーション**: 一覧表示は1ページあたり最大100件
- **検索機能**: インデックス化された項目（従業員名、メールアドレス）

#### **セッション**
- **セッションタイムアウト**: 30分間操作がない場合は自動ログアウト
- **ログイン試行制限**: 5回連続失敗でアカウント一時ロック（10分間）

### ブラウザサポート

#### **推奨ブラウザ**
- Google Chrome（最新版）
- Microsoft Edge（最新版）
- Mozilla Firefox（最新版）
- Safari（最新版）

#### **動作要件**
- JavaScript有効化必須
- Cookie有効化必須
- 画面解像度: 最小1280x720推奨

### セキュリティ制限

#### **パスワード要件**
- 最小8文字
- 大文字、小文字、数字、記号をそれぞれ1文字以上含む
- 過去5回使用したパスワードは使用不可

#### **データアクセス**
- ロールベースのアクセス制御（RBAC）
- 各API呼び出しで認証トークン必須
- クロスサイトリクエストフォージェリ（CSRF）対策実施

#### **監査ログ**
- すべての重要な操作（作成、更新、削除）はログに記録
- ログの保持期間: 1年間

### ネットワーク要件

#### **開発環境**
- ローカルホストで動作
- ポート範囲: 5000-5500（Aspireが動的割り当て）

#### **本番環境**
- HTTPS通信必須
- TLS 1.2以上
- ファイアウォール設定必要

---

## 11.5 問い合わせ窓口・連絡先

システムの利用に関するご質問やトラブルが発生した場合は、以下の窓口までお問い合わせください。

### システム管理者

#### **技術サポート**
- **メール**: support@employee-system.example.com
- **対応時間**: 平日 9:00〜18:00（日本標準時）
- **対応内容**:
  - システムのログインに関する問題
  - エラーメッセージの対処方法
  - 機能の使い方に関する質問
  - パスワードリセット依頼

#### **人事部（従業員情報関連）**
- **メール**: hr@employee-system.example.com
- **電話**: 03-1234-5678
- **対応時間**: 平日 9:00〜17:00
- **対応内容**:
  - 従業員情報の訂正依頼
  - 休暇申請の承認状況確認
  - 勤怠記録の修正依頼
  - 通知内容に関する質問

#### **開発チーム（バグ報告・機能要望）**
- **GitHub Issues**: https://github.com/runceel/DotnetEmployeeManagementSystem/issues
- **対応時間**: 24時間受付、対応は平日営業時間内
- **対応内容**:
  - バグ報告
  - 新機能の要望
  - ドキュメントの改善提案
  - セキュリティ脆弱性の報告

### 緊急時連絡先

#### **システム障害（緊急）**
- **緊急ホットライン**: 03-1234-5679
- **対応時間**: 24時間365日
- **対象**: システム全体のダウン、データ損失、セキュリティ侵害など

### よくある質問（FAQ）

#### **Q1: パスワードを忘れた場合はどうすればよいですか？**
A: ログイン画面の「パスワードを忘れた方」リンクをクリックし、登録済みメールアドレスを入力してください。パスワードリセット用のメールが送信されます。

#### **Q2: 自分の権限で実行できない操作があります。**
A: 一般ユーザーは閲覧権限のみです。編集や削除が必要な場合は、管理者または人事部にご連絡ください。

#### **Q3: 通知メールが届きません。**
A: 以下を確認してください：
- 迷惑メールフォルダを確認
- メールアドレスが正しく登録されているか確認
- 通知履歴で送信ステータスが「送信済み」になっているか確認

それでも解決しない場合は技術サポートにご連絡ください。

#### **Q4: 勤怠記録を間違えて登録してしまいました。**
A: 管理者が修正可能です。人事部までご連絡ください。

#### **Q5: システムのエラーメッセージが表示されます。**
A: エラーメッセージのスクリーンショットを撮影し、発生日時とともに技術サポートまでお送りください。

### ドキュメント参照

システムの詳細な技術情報については、以下のドキュメントを参照してください：

- **[Getting Started](../getting-started.md)** - セットアップと実行方法
- **[アーキテクチャ概要](../architecture.md)** - システム設計
- **[開発ガイド](../development-guide.md)** - 開発者向け情報
- **[通知サービス](../notification-service.md)** - 通知機能の詳細
- **[認可実装](../authorization-implementation.md)** - 権限管理の詳細
- **[Aspireダッシュボード](../aspire-dashboard.md)** - 監視とデバッグ

### フィードバック

このユーザーマニュアルの改善提案や追加要望がありましたら、GitHubのIssueまたはPull Requestでお知らせください。皆様のフィードバックをお待ちしております。

---

**本マニュアルのバージョン**: 1.0  
**最終更新日**: 2025年11月10日  
**次回更新予定**: 2025年12月（機能追加に応じて随時更新）

---

© 2025 従業員管理システム開発チーム  
本マニュアルの無断転載・複製を禁じます。
