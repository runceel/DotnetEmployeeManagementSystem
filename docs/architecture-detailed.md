# å¾“æ¥­å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

## 1. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### 1.1 ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ¡ç”¨

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€**.NET Aspire** ã‚’æ´»ç”¨ã—ãŸãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®åˆ©ç‚¹ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ï¼š

**æ¡ç”¨ç†ç”±ï¼š**

- **ç–çµåˆ**: å„ã‚µãƒ¼ãƒ“ã‚¹ãŒç‹¬ç«‹ã—ã¦é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: éœ€è¦ã«å¿œã˜ã¦å€‹åˆ¥ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã‚¹ã‚±ãƒ¼ãƒ«
- **æŠ€è¡“çš„æŸ”è»Ÿæ€§**: ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã«æœ€é©ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’é¸æŠå¯èƒ½
- **éšœå®³åˆ†é›¢**: 1ã¤ã®ã‚µãƒ¼ãƒ“ã‚¹ã®éšœå®³ãŒå…¨ä½“ã«æ³¢åŠã—ãªã„
- **ä¸¦è¡Œé–‹ç™º**: è¤‡æ•°ã®ãƒãƒ¼ãƒ ãŒç‹¬ç«‹ã—ã¦é–‹ç™ºå¯èƒ½

### 1.2 .NET Aspire ã«ã‚ˆã‚‹ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

.NET Aspire ã¯ã€åˆ†æ•£ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã€å®Ÿè¡Œã€ç›£è¦–ã‚’ç°¡ç´ åŒ–ã™ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚

**ä¸»è¦æ©Ÿèƒ½ï¼š**

- **ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼**: ã‚µãƒ¼ãƒ“ã‚¹é–“ã®è‡ªå‹•æ¤œå‡ºã¨é€šä¿¡
- **çµ±åˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å˜ä¸€ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰ç®¡ç†
- **OpenTelemetryçµ±åˆ**: åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ­ã‚°ã®çµ±åˆ
- **é–‹ç™ºè€…ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹**: Aspireãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚ˆã‚‹å¯è¦–åŒ–ã¨ç›£è¦–
- **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãªã©ã®ä¾å­˜ãƒªã‚½ãƒ¼ã‚¹ã®è‡ªå‹•æ§‹æˆ

### 1.3 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```mermaid
graph TB
    subgraph "é–‹ç™ºè€…"
        Dev[é–‹ç™ºè€…]
    end
    
    subgraph "ãƒ¦ãƒ¼ã‚¶ãƒ¼"
        User[ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼]
    end
    
    subgraph ".NET Aspire AppHost"
        AppHost[AppHost<br/>ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å±¤]
    end
    
    subgraph "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å±¤"
        BlazorWeb[BlazorWeb<br/>Blazor Web App<br/>Interactive Server]
    end
    
    subgraph "ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å±¤"
        EmployeeAPI[EmployeeService.API<br/>å¾“æ¥­å“¡ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹<br/>REST API]
        AuthAPI[AuthService.API<br/>èªè¨¼ãƒ»èªå¯ã‚µãƒ¼ãƒ“ã‚¹<br/>ASP.NET Core Identity]
        NotificationAPI[NotificationService.API<br/>é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹<br/>ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•é€šçŸ¥]
    end
    
    subgraph "å…±é€šåŸºç›¤"
        ServiceDefaults[ServiceDefaults<br/>OpenTelemetry<br/>Health Checks<br/>Resilience]
        Contracts[Shared.Contracts<br/>å…±æœ‰DTO]
    end
    
    subgraph "ãƒ‡ãƒ¼ã‚¿å±¤"
        EmployeeDB[(SQLite<br/>employeedb)]
        AuthDB[(SQLite<br/>authdb)]
        NotificationDB[(SQLite<br/>notificationdb)]
    end
    
    subgraph "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°å±¤"
        Redis[Redis<br/>Pub/Sub]
    end
    
    subgraph "å¯è¦³æ¸¬æ€§"
        Dashboard[Aspire Dashboard<br/>ç›£è¦–ãƒ»ãƒ‡ãƒãƒƒã‚°]
        OTel[OpenTelemetry<br/>Collector]
    end
    
    User -->|HTTPS| BlazorWeb
    Dev -->|ç®¡ç†| AppHost
    AppHost -->|èµ·å‹•ãƒ»ç®¡ç†| BlazorWeb
    AppHost -->|èµ·å‹•ãƒ»ç®¡ç†| EmployeeAPI
    AppHost -->|èµ·å‹•ãƒ»ç®¡ç†| AuthAPI
    AppHost -->|èµ·å‹•ãƒ»ç®¡ç†| NotificationAPI
    AppHost -->|æ§‹æˆ| EmployeeDB
    AppHost -->|æ§‹æˆ| AuthDB
    AppHost -->|æ§‹æˆ| NotificationDB
    AppHost -->|æ§‹æˆ| Redis
    AppHost -->|ç›£è¦–| Dashboard
    
    BlazorWeb -->|HTTP/REST| EmployeeAPI
    BlazorWeb -->|HTTP/REST| AuthAPI
    BlazorWeb -->|HTTP/REST| NotificationAPI
    BlazorWeb -.->|å‚ç…§| ServiceDefaults
    BlazorWeb -.->|å‚ç…§| Contracts
    
    EmployeeAPI -->|EF Core| EmployeeDB
    EmployeeAPI -->|Pub/Sub| Redis
    EmployeeAPI -.->|å‚ç…§| ServiceDefaults
    EmployeeAPI -.->|å‚ç…§| Contracts
    
    AuthAPI -->|EF Core| AuthDB
    AuthAPI -.->|å‚ç…§| ServiceDefaults
    AuthAPI -.->|å‚ç…§| Contracts
    
    NotificationAPI -->|EF Core| NotificationDB
    NotificationAPI -->|Pub/Sub| Redis
    NotificationAPI -.->|å‚ç…§| ServiceDefaults
    NotificationAPI -.->|å‚ç…§| Contracts
    
    ServiceDefaults -->|ãƒ†ãƒ¬ãƒ¡ãƒˆãƒª| OTel
    OTel -->|é›†ç´„| Dashboard
    
    style AppHost fill:#e1f5ff
    style Dashboard fill:#fff3e0
    style ServiceDefaults fill:#e8f5e9
```

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 2.1 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | é¸å®šç†ç”± |
|---------|------|----------|---------|
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | .NET | 9.0 | æœ€æ–°ã®é«˜æ€§èƒ½ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€C# 13ã‚µãƒãƒ¼ãƒˆ |
| **ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** | .NET Aspire | 9.5.2 | ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†ã€é–‹ç™ºä½“é¨“ã®å‘ä¸Š |
| **Aspire SDK** | Aspire.AppHost.Sdk | 9.5.2 | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ›ã‚¹ãƒˆæ§‹æˆ |
| **SQLiteçµ±åˆ** | CommunityToolkit.Aspire.Hosting.Sqlite | 9.9.0 | Aspireã¨ã®çµ±åˆã«ã‚ˆã‚‹SQLiteç®¡ç† |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | Blazor Web App | 9.0 | C#ã«ã‚ˆã‚‹çµ±ä¸€çš„ãªé–‹ç™ºã€Interactive Server |
| **UI ãƒ©ã‚¤ãƒ–ãƒ©ãƒª** | MudBlazor | 8.14.0 | Material Design ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€é«˜å“è³ªUI |
| **ORM** | Entity Framework Core | 9.0.10 | .NETæ¨™æº–ã®ORMã€Migrationså¯¾å¿œ |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | SQLite | - | é–‹ç™ºç’°å¢ƒï¼ˆè»½é‡ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ï¼‰|
| | Azure SQL | - | æœ¬ç•ªç’°å¢ƒäºˆå®šï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã€é«˜å¯ç”¨æ€§ï¼‰|
| **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°** | Redis | - | Pub/Subãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•é€šçŸ¥ï¼‰|
| **èªè¨¼** | ASP.NET Core Identity | 9.0.10 | æ¨™æº–èªè¨¼æ©Ÿèƒ½ã€ãƒ­ãƒ¼ãƒ«ç®¡ç† |
| **JWTèªè¨¼** | Microsoft.AspNetCore.Authentication.JwtBearer | 9.0.10 | ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼ï¼ˆå°†æ¥å®Ÿè£…ï¼‰|
| **OpenAPI** | Microsoft.AspNetCore.OpenApi | 9.0.10 | APIä»•æ§˜ç”Ÿæˆã€Swaggerçµ±åˆ |
| **å¯è¦³æ¸¬æ€§ - OTel** | OpenTelemetry.Exporter.OpenTelemetryProtocol | 1.13.1 | OTLPã‚¨ã‚¯ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ |
| | OpenTelemetry.Extensions.Hosting | 1.13.1 | .NETãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°çµ±åˆ |
| | OpenTelemetry.Instrumentation.AspNetCore | 1.13.0 | ASP.NET Coreã‚¤ãƒ³ã‚¹ãƒˆãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ |
| | OpenTelemetry.Instrumentation.Http | 1.13.0 | HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ |
| | OpenTelemetry.Instrumentation.Runtime | 1.13.0 | .NETãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ |
| **Resilience** | Microsoft.Extensions.Http.Resilience | 9.10.0 | HTTPãƒªãƒˆãƒ©ã‚¤ã€ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ |
| **ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼** | Microsoft.Extensions.ServiceDiscovery | 9.5.2 | Aspireã‚µãƒ¼ãƒ“ã‚¹æ¤œå‡º |
| **ãƒ†ã‚¹ãƒˆ** | xUnit | - | .NETæ¨™æº–ã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| | Moq | - | ãƒ¢ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |

### 2.2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯å¯¾å¿œè¡¨

| å±¤ | ä½¿ç”¨æŠ€è¡“ | ç›®çš„ |
|----|---------|------|
| **ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å±¤** | .NET Aspire AppHost | ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ãƒ»ç®¡ç†ã€ãƒªã‚½ãƒ¼ã‚¹æ§‹æˆ |
| **ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤** | Blazor Web App, MudBlazor | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ |
| **APIå±¤** | ASP.NET Core Web API, OpenAPI | RESTful APIå…¬é–‹ |
| **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤** | C# 13, Recordå‹ | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€DTO |
| **ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤** | C# 13 Class | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ« |
| **ã‚¤ãƒ³ãƒ•ãƒ©å±¤** | EF Core, SQLite | ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã€å¤–éƒ¨çµ±åˆ |
| **æ¨ªæ–­çš„é–¢å¿ƒäº‹** | ServiceDefaults, OpenTelemetry | å¯è¦³æ¸¬æ€§ã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |

## 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

### 3.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
DotnetEmployeeManagementSystem/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ AppHost/                              # Aspire ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ AppHost.csproj                    # Aspire.AppHost.Sdk 9.5.2
â”‚   â”‚   â””â”€â”€ AppHost.cs                        # ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆã¨èµ·å‹•
â”‚   â”‚
â”‚   â”œâ”€â”€ ServiceDefaults/                      # å…±é€šè¨­å®šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ServiceDefaults.csproj           
â”‚   â”‚   â””â”€â”€ Extensions.cs                     # OpenTelemetry, Health Checksæ‹¡å¼µ
â”‚   â”‚
â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”œâ”€â”€ EmployeeService/                  # å¾“æ¥­å“¡ç®¡ç†ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ Domain/                      # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EmployeeService.Domain.csproj
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Entities/                # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Employee.cs
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Department.cs
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Interfaces/              # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Application/                 # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EmployeeService.Application.csproj
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Services/                # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DTOs/                    # ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Interfaces/              # ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Infrastructure/              # ã‚¤ãƒ³ãƒ•ãƒ©å±¤
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EmployeeService.Infrastructure.csproj
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Data/                    # EF Core DbContext
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ EmployeeDbContext.cs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Repositories/            # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Migrations/              # EF Core ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ API/                         # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”‚       â”œâ”€â”€ EmployeeService.API.csproj
â”‚   â”‚   â”‚       â”œâ”€â”€ Program.cs               # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚       â”œâ”€â”€ Controllers/             # APIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
â”‚   â”‚   â”‚       â”œâ”€â”€ Endpoints/               # Minimal APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚       â””â”€â”€ appsettings.json
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ AuthService/                     # èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ Domain/                      # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AuthService.Domain.csproj
â”‚   â”‚   â”‚   â”œâ”€â”€ Application/                 # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AuthService.Application.csproj
â”‚   â”‚   â”‚   â”œâ”€â”€ Infrastructure/              # ã‚¤ãƒ³ãƒ•ãƒ©å±¤
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AuthService.Infrastructure.csproj
â”‚   â”‚   â”‚   â””â”€â”€ API/                         # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”‚       â”œâ”€â”€ AuthService.API.csproj
â”‚   â”‚   â”‚       â””â”€â”€ Program.cs
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ NotificationService/             # é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚       â”œâ”€â”€ Domain/                      # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”‚       â”‚   â”œâ”€â”€ NotificationService.Domain.csproj
â”‚   â”‚       â”‚   â”œâ”€â”€ Entities/                # é€šçŸ¥ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚       â”‚   â””â”€â”€ Repositories/            # ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚       â”œâ”€â”€ Application/                 # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚       â”‚   â”œâ”€â”€ NotificationService.Application.csproj
â”‚   â”‚       â”‚   â”œâ”€â”€ UseCases/                # é€šçŸ¥ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â”‚       â”‚   â”œâ”€â”€ Services/                # IEmailService
â”‚   â”‚       â”‚   â””â”€â”€ Mappings/                # DTOãƒãƒƒãƒ”ãƒ³ã‚°
â”‚   â”‚       â”œâ”€â”€ Infrastructure/              # ã‚¤ãƒ³ãƒ•ãƒ©å±¤
â”‚   â”‚       â”‚   â”œâ”€â”€ NotificationService.Infrastructure.csproj
â”‚   â”‚       â”‚   â”œâ”€â”€ Data/                    # DbContext
â”‚   â”‚       â”‚   â”œâ”€â”€ Repositories/            # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
â”‚   â”‚       â”‚   â”œâ”€â”€ Services/                # ConsoleEmailService
â”‚   â”‚       â”‚   â”œâ”€â”€ Messaging/               # Redis Pub/Sub
â”‚   â”‚       â”‚   â””â”€â”€ Workers/                 # ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†
â”‚   â”‚       â””â”€â”€ API/                         # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚           â”œâ”€â”€ NotificationService.API.csproj
â”‚   â”‚           â”œâ”€â”€ Program.cs
â”‚   â”‚           â””â”€â”€ Endpoints/               # API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ WebApps/
â”‚   â”‚   â””â”€â”€ BlazorWeb/                       # Blazor Web UI
â”‚   â”‚       â”œâ”€â”€ BlazorWeb.csproj
â”‚   â”‚       â”œâ”€â”€ Program.cs
â”‚   â”‚       â”œâ”€â”€ Components/                  # Blazor ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚       â”‚   â”œâ”€â”€ Pages/                   # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚       â”‚   â”œâ”€â”€ Layout/                  # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚       â”‚   â””â”€â”€ Dialogs/                 # ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚       â””â”€â”€ Services/                    # UIã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚
â”‚   â””â”€â”€ Shared/
â”‚       â””â”€â”€ Contracts/                       # å…±æœ‰ DTO
â”‚           â”œâ”€â”€ Shared.Contracts.csproj
â”‚           â”œâ”€â”€ EmployeeService/             # å¾“æ¥­å“¡ã‚µãƒ¼ãƒ“ã‚¹å¥‘ç´„
â”‚           â””â”€â”€ AuthService/                 # èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹å¥‘ç´„
â”‚
â”œâ”€â”€ tests/                                    # ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”œâ”€â”€ EmployeeService.Domain.Tests/        # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ EmployeeService.Application.Tests/   # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ EmployeeService.Integration.Tests/   # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ AuthService.Tests/                   # èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆ
â”‚
â””â”€â”€ docs/                                     # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    â”œâ”€â”€ architecture.md                       # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
    â”œâ”€â”€ architecture-detailed.md              # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    â”œâ”€â”€ development-guide.md                  # é–‹ç™ºã‚¬ã‚¤ãƒ‰
    â”œâ”€â”€ aspire-dashboard.md                   # Aspireãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰
    â”œâ”€â”€ database.md                           # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†
    â”œâ”€â”€ authorization-implementation.md       # èªå¯å®Ÿè£…
    â””â”€â”€ entra-id-integration-design.md        # Entra IDçµ±åˆè¨­è¨ˆ
```

### 3.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¾å­˜é–¢ä¿‚

```mermaid
graph LR
    subgraph "AppHost"
        AH[AppHost]
    end
    
    subgraph "WebApps"
        BW[BlazorWeb]
    end
    
    subgraph "EmployeeService"
        EAPI[API]
        EInf[Infrastructure]
        EApp[Application]
        EDom[Domain]
    end
    
    subgraph "AuthService"
        AAPI[API]
        AInf[Infrastructure]
        AApp[Application]
        ADom[Domain]
    end
    
    subgraph "Shared"
        SD[ServiceDefaults]
        Contracts[Contracts]
    end
    
    AH -->|å‚ç…§| EAPI
    AH -->|å‚ç…§| AAPI
    AH -->|å‚ç…§| BW
    
    BW -->|å‚ç…§| SD
    BW -->|å‚ç…§| Contracts
    
    EAPI -->|å‚ç…§| EInf
    EAPI -->|å‚ç…§| EApp
    EAPI -->|å‚ç…§| SD
    
    EInf -->|å‚ç…§| EApp
    EInf -->|å‚ç…§| EDom
    
    EApp -->|å‚ç…§| EDom
    EApp -->|å‚ç…§| Contracts
    
    AAPI -->|å‚ç…§| AInf
    AAPI -->|å‚ç…§| AApp
    AAPI -->|å‚ç…§| SD
    AAPI -->|å‚ç…§| Contracts
    
    AInf -->|å‚ç…§| AApp
    AInf -->|å‚ç…§| ADom
    
    AApp -->|å‚ç…§| ADom
    AApp -->|å‚ç…§| Contracts
```

## 4. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

### 4.1 ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

å„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«åŸºã¥ã„ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

#### å±¤ã®è²¬å‹™

**Domain å±¤ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼‰**
- **è²¬å‹™**: ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
- **ä¾å­˜**: ãªã—ï¼ˆä»–ã®å±¤ã«ä¾å­˜ã—ãªã„ï¼‰
- **å†…å®¹**:
  - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆEntityï¼‰
  - å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆValue Objectsï¼‰
  - ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
  - ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
  - ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ–¹å¼**: ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹
```csharp
public class Employee
{
    public Guid Id { get; private set; }
    public string Email { get; private set; }
    public DateTime HireDate { get; private set; }
    
    public Employee(string email, DateTime hireDate)
    {
        Email = email ?? throw new ArgumentNullException(nameof(email));
        HireDate = hireDate;
        ValidateEmployee();
    }
    
    private void ValidateEmployee()
    {
        if (!IsValidEmail(Email))
            throw new ArgumentException("æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
            
        if (HireDate > DateTime.UtcNow)
            throw new ArgumentException("å…¥ç¤¾æ—¥ã¯ç¾åœ¨ã‚ˆã‚Šå‰ã®æ—¥ä»˜ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚");
    }
}
```

**Application å±¤ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰**
- **è²¬å‹™**: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
- **ä¾å­˜**: Domainå±¤ã®ã¿
- **å†…å®¹**:
  - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
  - DTOï¼ˆData Transfer Objectsï¼‰
  - ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  - ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ–¹å¼**: DataAnnotations
```csharp
public record CreateEmployeeRequest
{
    [Required(ErrorMessage = "åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")]
    public string FirstName { get; init; } = string.Empty;
    
    [Required(ErrorMessage = "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")]
    [EmailAddress(ErrorMessage = "æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")]
    public string Email { get; init; } = string.Empty;
}
```

**Infrastructure å±¤ï¼ˆã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼‰**
- **è²¬å‹™**: å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ
- **ä¾å­˜**: Domainå±¤ã€Applicationå±¤
- **å†…å®¹**:
  - Entity Framework Core DbContext
  - ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
  - å¤–éƒ¨APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ã‚»ã‚¹
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**API å±¤ï¼ˆãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰**
- **è²¬å‹™**: HTTPã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å…¬é–‹
- **ä¾å­˜**: Applicationå±¤ã€Infrastructureå±¤
- **å†…å®¹**:
  - ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼/Minimal API
  - ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¢ãƒ‡ãƒ«
  - èªè¨¼/èªå¯
  - OpenAPI/Swaggerè¨­å®š

#### ä¾å­˜é–¢ä¿‚ã®æ–¹å‘

```
APIå±¤ â”€â”€â”€â”€â†’ Infrastructureå±¤ â”€â”€â”€â”€â†’ Applicationå±¤ â”€â”€â”€â”€â†’ Domainå±¤
                                         â†“
                                    Contracts
```

**ä¾å­˜æ€§é€†è»¢ã®åŸå‰‡ï¼ˆDIPï¼‰**:
- ä¸Šä½å±¤ï¼ˆApplicationï¼‰ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šç¾©
- ä¸‹ä½å±¤ï¼ˆInfrastructureï¼‰ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…
- ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¯ã‚¤ãƒ³ãƒ•ãƒ©ã®è©³ç´°ã‹ã‚‰ç‹¬ç«‹

### 4.2 ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹è¨­è¨ˆ

#### ã‚µãƒ¼ãƒ“ã‚¹åˆ†å‰²æˆ¦ç•¥

**EmployeeServiceï¼ˆå¾“æ¥­å“¡ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ï¼‰**
- **è²¬å‹™**: å¾“æ¥­å“¡ãƒ‡ãƒ¼ã‚¿ã® CRUD æ“ä½œ
- **æ©Ÿèƒ½**:
  - å¾“æ¥­å“¡ã®ç™»éŒ²ã€æ›´æ–°ã€å‰Šé™¤
  - å¾“æ¥­å“¡æ¤œç´¢
  - éƒ¨é–€ç®¡ç†
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: employeedb (SQLite)
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/api/employees`, `/api/departments`

**AuthServiceï¼ˆèªè¨¼ãƒ»èªå¯ã‚µãƒ¼ãƒ“ã‚¹ï¼‰**
- **è²¬å‹™**: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **æ©Ÿèƒ½**:
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
  - ãƒ­ãƒ¼ãƒ«ç®¡ç†ï¼ˆAdmin, Userï¼‰
  - ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œï¼ˆå°†æ¥: JWTï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: authdb (SQLite)
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/api/auth/register`, `/api/auth/login`

**NotificationServiceï¼ˆé€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ï¼‰**
- **è²¬å‹™**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹é€šçŸ¥ç®¡ç†
- **æ©Ÿèƒ½**:
  - å¾“æ¥­å“¡ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ï¼‰ã®è‡ªå‹•ç›£è¦–
  - ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã®è‡ªå‹•é€ä¿¡
  - æ‰‹å‹•é€šçŸ¥é€ä¿¡ã®ã‚µãƒãƒ¼ãƒˆ
  - é€šçŸ¥å±¥æ­´ã®ç®¡ç†ã¨è¿½è·¡
  - ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ¯ãƒ¼ã‚«ãƒ¼ã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: notificationdb (SQLite)
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/api/notifications`
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°**: Redis Pub/SubçµŒç”±ã§EmployeeServiceã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡

è©³ç´°ã¯ [é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…ã‚¬ã‚¤ãƒ‰](notification-service.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**BlazorWebï¼ˆUI ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰**
- **è²¬å‹™**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **æ©Ÿèƒ½**:
  - å¾“æ¥­å“¡ä¸€è¦§è¡¨ç¤º
  - å¾“æ¥­å“¡ç™»éŒ²ãƒ»ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  - é€šçŸ¥ç®¡ç†ç”»é¢
  - ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
  - èªå¯ã«ã‚ˆã‚‹UIåˆ¶å¾¡
- **é€šä¿¡**: HTTP REST APIçµŒç”±ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã¨é€šä¿¡

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ†é›¢

å„ã‚µãƒ¼ãƒ“ã‚¹ã¯ç‹¬ç«‹ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æŒã¡ã¾ã™ï¼š

| ã‚µãƒ¼ãƒ“ã‚¹ | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | ç®¡ç†å¯¾è±¡ |
|---------|------------|---------|
| EmployeeService | employeedb | å¾“æ¥­å“¡ã€éƒ¨é–€ |
| AuthService | authdb | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ãƒ­ãƒ¼ãƒ« |
| NotificationService | notificationdb | é€šçŸ¥ã€é€šçŸ¥å±¥æ­´ |

**åˆ©ç‚¹**:
- ã‚µãƒ¼ãƒ“ã‚¹ã®ç‹¬ç«‹æ€§
- ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã®å½±éŸ¿ç¯„å›²é™å®š
- å€‹åˆ¥ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- ãƒ‡ãƒ¼ã‚¿ã®è«–ç†çš„åˆ†é›¢

#### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°åŸºç›¤

**Redis Pub/Sub**ã‚’ä½¿ç”¨ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼š

**å½¹å‰²**:
- ã‚µãƒ¼ãƒ“ã‚¹é–“ã®éåŒæœŸé€šä¿¡
- ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºè¡Œã¨è³¼èª­
- ç–çµåˆãªã‚µãƒ¼ãƒ“ã‚¹çµ±åˆ

**ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ£ãƒãƒ«**:
- `employee.created`: å¾“æ¥­å“¡ä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ
- `employee.updated`: å¾“æ¥­å“¡æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆ
- `employee.deleted`: å¾“æ¥­å“¡å‰Šé™¤ã‚¤ãƒ™ãƒ³ãƒˆ

**å®Ÿè£…**:
```csharp
// EmployeeService - ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
await _eventPublisher.PublishAsync("employee.created", eventData);

// NotificationService - ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­
await subscriber.SubscribeAsync(
    RedisChannel.Literal("employee.created"),
    async (channel, message) => await HandleEventAsync(message));
```

**åˆ©ç‚¹**:
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
- ã‚µãƒ¼ãƒ“ã‚¹é–“ã®ä¾å­˜é–¢ä¿‚å‰Šæ¸›
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªéåŒæœŸå‡¦ç†
- è¤‡æ•°ã®ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ã‚’ã‚µãƒãƒ¼ãƒˆ

è©³ç´°ã¯ [é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…ã‚¬ã‚¤ãƒ‰](notification-service.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 5.1 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant UI as BlazorWeb<br/>(UI)
    participant EmpAPI as EmployeeService<br/>API
    participant EmpApp as EmployeeService<br/>Application
    participant EmpRepo as EmployeeService<br/>Repository
    participant EmpDB as EmployeeDB<br/>(SQLite)
    
    User->>UI: å¾“æ¥­å“¡ä¸€è¦§ã‚’è¡¨ç¤º
    UI->>EmpAPI: GET /api/employees
    EmpAPI->>EmpApp: GetAllEmployeesAsync()
    EmpApp->>EmpRepo: GetAllAsync()
    EmpRepo->>EmpDB: SELECT * FROM Employees
    EmpDB-->>EmpRepo: Employee[]
    EmpRepo-->>EmpApp: Employee[]
    EmpApp-->>EmpAPI: EmployeeDto[]
    EmpAPI-->>UI: HTTP 200 + JSON
    UI-->>User: å¾“æ¥­å“¡ä¸€è¦§è¡¨ç¤º
```

### 5.2 å…¸å‹çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼

#### èª­ã¿å–ã‚Šæ“ä½œï¼ˆå¾“æ¥­å“¡å–å¾—ï¼‰

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
   â†“
2. BlazorWeb (UI)
   â†“ HTTP GET /api/employees
3. EmployeeService.API (ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼/ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
   â†“ EmployeeService.GetAllAsync()
4. Applicationå±¤ï¼ˆEmployeeServiceï¼‰
   â†“ Repository.GetAllAsync()
5. Infrastructureå±¤ï¼ˆEmployeeRepositoryï¼‰
   â†“ DbContext.Employees.ToListAsync()
6. EF Core
   â†“ SQL: SELECT * FROM Employees
7. SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
   â†“ Employee[] ãƒ‡ãƒ¼ã‚¿
6. EF Core
   â†“ Employee[] ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
5. Infrastructureå±¤
   â†“ Employee[] è¿”å´
4. Applicationå±¤
   â†“ EmployeeDto[] å¤‰æ›
3. APIå±¤
   â†“ HTTP 200 + JSON
2. BlazorWeb
   â†“ UIæ›´æ–°
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤º
```

#### æ›¸ãè¾¼ã¿æ“ä½œï¼ˆå¾“æ¥­å“¡ä½œæˆï¼‰

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
   â†“
2. BlazorWeb (UI)
   â†“ èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼ä»˜ã HTTP POST /api/employees
3. EmployeeService.API
   â†“ èªå¯ãƒã‚§ãƒƒã‚¯ï¼ˆ[Authorize(Roles = "Admin")]ï¼‰
   â†“ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆDataAnnotationsï¼‰
   â†“ EmployeeService.CreateAsync()
4. Applicationå±¤
   â†“ Employee ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ä½œæˆ
   â†“ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   â†“ Repository.AddAsync()
5. Infrastructureå±¤
   â†“ DbContext.Employees.Add()
   â†“ DbContext.SaveChangesAsync()
6. EF Core
   â†“ SQL: INSERT INTO Employees
7. SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
   â†“ æˆåŠŸ
6. EF Core
5. Infrastructureå±¤
4. Applicationå±¤
   â†“ EmployeeDto è¿”å´
3. APIå±¤
   â†“ HTTP 201 Created + JSON
2. BlazorWeb
   â†“ UIæ›´æ–°ï¼ˆä¸€è¦§ã«è¿½åŠ ï¼‰
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥
```

### 5.3 èªè¨¼ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant User
    participant BlazorWeb
    participant AuthAPI
    participant AuthDB
    
    User->>BlazorWeb: ãƒ­ã‚°ã‚¤ãƒ³è¦æ±‚
    BlazorWeb->>AuthAPI: POST /api/auth/login<br/>{username, password}
    AuthAPI->>AuthDB: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼
    AuthDB-->>AuthAPI: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ± + ãƒ­ãƒ¼ãƒ«
    AuthAPI-->>BlazorWeb: ãƒ€ãƒŸãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ + ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
    BlazorWeb-->>User: ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
    
    Note over BlazorWeb: ä»¥é™ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ãƒ˜ãƒƒãƒ€ãƒ¼è¿½åŠ 
    
    BlazorWeb->>EmployeeService: GET /api/employees<br/>X-User-Id: xxx<br/>X-User-Roles: Admin
    EmployeeService-->>BlazorWeb: HTTP 200 + å¾“æ¥­å“¡ãƒ‡ãƒ¼ã‚¿
```

## 6. ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡

### 6.1 é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«

**HTTP/REST API**
- **ãƒ—ãƒ­ãƒˆã‚³ãƒ«**: HTTPSï¼ˆé–‹ç™ºç’°å¢ƒã§ã¯HTTPå¯ï¼‰
- **å½¢å¼**: JSON
- **èªè¨¼**: ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆç¾åœ¨ï¼‰ã€JWTï¼ˆå°†æ¥ï¼‰

**Aspire ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼**
```csharp
// AppHost.cs - ã‚µãƒ¼ãƒ“ã‚¹ç™»éŒ²
var employeeServiceApi = builder.AddProject<Projects.EmployeeService_API>("employeeservice-api");

builder.AddProject<Projects.BlazorWeb>("blazorweb")
    .WithReference(employeeServiceApi); // ã‚µãƒ¼ãƒ“ã‚¹å‚ç…§
```

```csharp
// BlazorWeb - ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨
builder.Services.AddHttpClient<EmployeeApiClient>(client =>
{
    // AspireãŒã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ã‚’é€šã˜ã¦
    // employeeservice-api ã®URLã‚’è‡ªå‹•è§£æ±º
    client.BaseAddress = new Uri("https+http://employeeservice-api");
});
```

### 6.2 OpenTelemetry ã«ã‚ˆã‚‹åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°

ã™ã¹ã¦ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯è‡ªå‹•çš„ã«ãƒˆãƒ¬ãƒ¼ã‚¹ã•ã‚Œã¾ã™ï¼š

```csharp
// ServiceDefaults ãŒè‡ªå‹•çš„ã«æ§‹æˆ
builder.Services.AddOpenTelemetry()
    .WithTracing(tracing =>
    {
        tracing.AddAspNetCoreInstrumentation(); // å—ä¿¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        tracing.AddHttpClientInstrumentation(); // é€ä¿¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    });
```

**ãƒˆãƒ¬ãƒ¼ã‚¹æƒ…å ±**:
- ãƒˆãƒ¬ãƒ¼ã‚¹ID: ãƒªã‚¯ã‚¨ã‚¹ãƒˆå…¨ä½“ã‚’è¿½è·¡
- ã‚¹ãƒ‘ãƒ³ID: å„æ“ä½œã‚’è¿½è·¡
- è¦ªã‚¹ãƒ‘ãƒ³: å‘¼ã³å‡ºã—é–¢ä¿‚ã‚’è¨˜éŒ²
- ã‚¿ã‚°: HTTPãƒ¡ã‚½ãƒƒãƒ‰ã€URLã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãªã©

### 6.3 ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³

**Microsoft.Extensions.Http.Resilience** ã«ã‚ˆã‚‹è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤:

```csharp
builder.Services.AddHttpClient<EmployeeApiClient>()
    .AddStandardResilienceHandler(); // è‡ªå‹•çš„ã«ä»¥ä¸‹ã‚’è¿½åŠ :
    // - ãƒªãƒˆãƒ©ã‚¤ï¼ˆæŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼‰
    // - ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼
    // - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
```

## 7. å¯è¦³æ¸¬æ€§ã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### 7.1 OpenTelemetry çµ±åˆå¯è¦³æ¸¬æ€§

ServiceDefaults ã«ã‚ˆã‚Šã€ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã§çµ±ä¸€ã•ã‚ŒãŸå¯è¦³æ¸¬æ€§ã‚’æä¾›ã—ã¾ã™ã€‚

**3ã¤ã®æŸ±**:

1. **ãƒˆãƒ¬ãƒ¼ã‚¹ï¼ˆTracesï¼‰**: åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°
2. **ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆMetricsï¼‰**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
3. **ãƒ­ã‚°ï¼ˆLogsï¼‰**: æ§‹é€ åŒ–ãƒ­ã‚°

### 7.2 åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°

**è‡ªå‹•ãƒˆãƒ¬ãƒ¼ã‚¹å¯¾è±¡**:
- ASP.NET Core ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- HttpClient ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªï¼ˆEF Coreï¼‰
- .NET ãƒ©ãƒ³ã‚¿ã‚¤ãƒ æ“ä½œ

**ãƒˆãƒ¬ãƒ¼ã‚¹ä¾‹**:
```
TraceId: 4bf92f3577b34da6a3ce929d0e0e4736
â”œâ”€ BlazorWeb â†’ EmployeeService [200ms]
â”‚  â”œâ”€ GET /api/employees [180ms]
â”‚  â”‚  â”œâ”€ EmployeeService.GetAllAsync [150ms]
â”‚  â”‚  â”‚  â””â”€ EF Core Query [100ms]
â”‚  â”‚  â””â”€ JSON Serialization [10ms]
â”‚  â””â”€ Response [20ms]
â””â”€ Total Duration: 200ms
```

### 7.3 ãƒ¡ãƒˆãƒªã‚¯ã‚¹

**æ¨™æº–ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:
- `http.server.request.duration`: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚é–“
- `http.server.active_requests`: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
- `process.runtime.dotnet.gc.collections.count`: GCå›æ•°
- `process.runtime.dotnet.gc.heap.size`: ãƒ’ãƒ¼ãƒ—ã‚µã‚¤ã‚º

**ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹å®Ÿè£…ä¾‹**:
```csharp
public class EmployeeService
{
    private static readonly Counter<long> _employeeCreated = 
        Meter.CreateCounter<long>("employees.created", "count");
    
    public async Task CreateEmployeeAsync(Employee employee)
    {
        // ... å¾“æ¥­å“¡ä½œæˆå‡¦ç†
        _employeeCreated.Add(1, new("department", employee.Department));
    }
}
```

### 7.4 æ§‹é€ åŒ–ãƒ­ã‚°

**ILogger ã«ã‚ˆã‚‹æ§‹é€ åŒ–ãƒ­ã‚°**:
```csharp
public class EmployeeService
{
    private readonly ILogger<EmployeeService> _logger;
    
    public async Task<Employee?> GetEmployeeAsync(Guid id)
    {
        _logger.LogInformation(
            "Retrieving employee {EmployeeId}", 
            id);
        
        try
        {
            var employee = await _repository.GetByIdAsync(id);
            
            if (employee == null)
            {
                _logger.LogWarning(
                    "Employee {EmployeeId} not found", 
                    id);
            }
            
            return employee;
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, 
                "Error retrieving employee {EmployeeId}", 
                id);
            throw;
        }
    }
}
```

### 7.5 Aspire Dashboard ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–

**ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•**:
```bash
dotnet run --project src/AppHost
# ãƒ–ãƒ©ã‚¦ã‚¶ã§ https://localhost:15001 ãŒè‡ªå‹•çš„ã«é–‹ã
```

**ä¸»è¦æ©Ÿèƒ½**:
- **ãƒªã‚½ãƒ¼ã‚¹**: ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã®çŠ¶æ…‹ã¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚¹ãƒˆãƒªãƒ¼ãƒ 
- **æ§‹é€ åŒ–ãƒ­ã‚°**: æ¤œç´¢å¯èƒ½ãªãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒª
- **ãƒˆãƒ¬ãƒ¼ã‚¹**: åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã®å¯è¦–åŒ–
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚°ãƒ©ãƒ•

## 8. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

### 8.1 ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ãƒ™ãƒ«ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ ServiceDefaults ã«ã‚ˆã‚Šè‡ªå‹•çš„ã«ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã—ã¾ã™ï¼š

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- `/health`: è©³ç´°ãªãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯çµæœï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
- `/alive`: ç°¡æ˜“ç”Ÿå­˜ç¢ºèªï¼ˆå¸¸ã«å…¬é–‹ï¼‰

**å®Ÿè£…**:
```csharp
// ServiceDefaults/Extensions.cs
public static IHostApplicationBuilder AddServiceDefaults(
    this IHostApplicationBuilder builder)
{
    builder.Services.AddHealthChecks()
        .AddCheck("self", () => HealthCheckResult.Healthy());
    
    // è¿½åŠ ã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼ˆä¾‹: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰
    builder.Services.AddHealthChecks()
        .AddDbContextCheck<EmployeeDbContext>();
}
```

### 8.2 ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

```json
{
  "status": "Healthy",
  "totalDuration": "00:00:00.0123456",
  "entries": {
    "self": {
      "status": "Healthy",
      "duration": "00:00:00.0001234"
    },
    "EmployeeDbContext": {
      "status": "Healthy",
      "duration": "00:00:00.0050000",
      "data": {}
    }
  }
}
```

### 8.3 ä¾å­˜ã‚µãƒ¼ãƒ“ã‚¹ãƒã‚§ãƒƒã‚¯

å°†æ¥çš„ã«ã¯ä»¥ä¸‹ã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ äºˆå®šï¼š
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
- å¤–éƒ¨APIæ¥ç¶š
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼æ¥ç¶š
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¥ç¶š

## 9. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 9.1 ç¾åœ¨ã®èªè¨¼å®Ÿè£…

**ASP.NET Core Identity**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†: SQLite ãƒ™ãƒ¼ã‚¹
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥: PBKDF2
- ãƒ­ãƒ¼ãƒ«ç®¡ç†: Admin, User

**ã‚«ã‚¹ã‚¿ãƒ èªè¨¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼**
```csharp
// EmployeeService.API
public class CustomAuthenticationHandler : AuthenticationHandler<AuthenticationSchemeOptions>
{
    protected override async Task<AuthenticateResult> HandleAuthenticateAsync()
    {
        var userId = Request.Headers["X-User-Id"].ToString();
        var userName = Request.Headers["X-User-Name"].ToString();
        var roles = Request.Headers["X-User-Roles"].ToString();
        
        if (string.IsNullOrEmpty(userId))
            return AuthenticateResult.NoResult();
        
        // ã‚¯ãƒ¬ãƒ¼ãƒ ä½œæˆã¨ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«è¿”å´
        // ...
    }
}
```

**ãƒ€ãƒŸãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³**ï¼ˆé–‹ç™ºç’°å¢ƒå°‚ç”¨ï¼‰:
```csharp
private static string GenerateDummyToken(ApplicationUser user)
{
    var tokenData = $"{user.Id}:{user.UserName}:{DateTime.UtcNow:O}";
    return Convert.ToBase64String(Encoding.UTF8.GetBytes(tokenData));
}
```

### 9.2 èªå¯å®Ÿè£…

**ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆRBACï¼‰**

```csharp
// EmployeeService.API - ç®¡ç†è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
[Authorize(Roles = "Admin")]
[HttpPost]
public async Task<IActionResult> CreateEmployee(CreateEmployeeRequest request)
{
    // ...
}

[Authorize(Roles = "Admin")]
[HttpPut("{id}")]
public async Task<IActionResult> UpdateEmployee(Guid id, UpdateEmployeeRequest request)
{
    // ...
}
```

**UIãƒ¬ãƒ™ãƒ«ã®èªå¯**:
```razor
@if (AuthStateService.IsAdmin)
{
    <MudButton OnClick="OpenCreateDialog">å¾“æ¥­å“¡ã‚’è¿½åŠ </MudButton>
}
```

### 9.3 ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼

é–‹ç™ºç’°å¢ƒã§è‡ªå‹•ä½œæˆã•ã‚Œã‚‹ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼š

| ãƒ¦ãƒ¼ã‚¶ãƒ¼å | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ | ãƒ­ãƒ¼ãƒ« | ç”¨é€” |
|----------|----------|--------|------|
| admin | Admin123! | Admin | ç®¡ç†è€…æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ |
| testuser | Password123! | User | ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆ |

### 9.4 ä»Šå¾Œã®å®Ÿè£…äºˆå®š

**JWT ãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼**
```csharp
builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
    .AddJwtBearer(options =>
    {
        options.TokenValidationParameters = new TokenValidationParameters
        {
            ValidateIssuer = true,
            ValidateAudience = true,
            ValidateLifetime = true,
            ValidateIssuerSigningKey = true,
            ValidIssuer = configuration["Jwt:Issuer"],
            ValidAudience = configuration["Jwt:Audience"],
            IssuerSigningKey = new SymmetricSecurityKey(
                Encoding.UTF8.GetBytes(configuration["Jwt:Key"]))
        };
    });
```

**Microsoft Entra ID çµ±åˆ**
- OAuth 2.0 / OpenID Connect
- ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³ï¼ˆSSOï¼‰
- å¤šè¦ç´ èªè¨¼ï¼ˆMFAï¼‰
- æ¡ä»¶ä»˜ãã‚¢ã‚¯ã‚»ã‚¹

è©³ç´°ã¯ [Entra IDçµ±åˆè¨­è¨ˆ](entra-id-integration-design.md) ã‚’å‚ç…§ã€‚

## 10. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 10.1 é–‹ç™ºç’°å¢ƒ: SQLite

**é¸å®šç†ç”±**:
- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ï¼ˆ`employeedb.db`, `authdb.db`ï¼‰
- è»½é‡ã§é«˜é€Ÿ
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‹ã‚‰é™¤å¤–å¯èƒ½

**Aspireçµ±åˆ**:
```csharp
// AppHost.cs
var employeeDb = builder.AddSqlite("employeedb");
var employeeServiceApi = builder.AddProject<Projects.EmployeeService_API>("employeeservice-api")
    .WithReference(employeeDb);
```

**æ¥ç¶šæ–‡å­—åˆ—è‡ªå‹•ç”Ÿæˆ**:
AspireãŒä¸€æ™‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€æ¥ç¶šæ–‡å­—åˆ—ã‚’è‡ªå‹•æ³¨å…¥ã—ã¾ã™ã€‚

### 10.2 æœ¬ç•ªç’°å¢ƒ: Azure SQL Databaseï¼ˆäºˆå®šï¼‰

**ç§»è¡Œæˆ¦ç•¥**:

```csharp
// appsettings.Production.json
{
  "ConnectionStrings": {
    "DefaultConnection": "" // Azure Key Vaultã‹ã‚‰å–å¾—
  }
}

// Program.cs
var connectionString = builder.Configuration.GetConnectionString("DefaultConnection")
    ?? Environment.GetEnvironmentVariable("DATABASE_CONNECTION_STRING")
    ?? throw new InvalidOperationException("Connection string not found");

builder.Services.AddDbContext<EmployeeDbContext>(options =>
{
    if (builder.Environment.IsDevelopment())
    {
        options.UseSqlite(connectionString);
    }
    else
    {
        options.UseSqlServer(connectionString);
    }
});
```

### 10.3 EF Core Migrations

**ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ**:
```bash
cd src/Services/EmployeeService/Infrastructure
dotnet ef migrations add InitialCreate --startup-project ../API
dotnet ef database update --startup-project ../API
```

**è‡ªå‹•ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨**ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰:
```csharp
// EmployeeService.API/Program.cs
if (app.Environment.IsDevelopment())
{
    using var scope = app.Services.CreateScope();
    var dbContext = scope.ServiceProvider.GetRequiredService<EmployeeDbContext>();
    await dbContext.Database.MigrateAsync();
}
```

### 10.4 ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£è¨­è¨ˆä¾‹

**Employee ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**:
```csharp
public class Employee
{
    public Guid Id { get; private set; }
    public string FirstName { get; private set; }
    public string LastName { get; private set; }
    public string Email { get; private set; }
    public DateTime HireDate { get; private set; }
    public int? DepartmentId { get; private set; }
    
    // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    public Department? Department { get; private set; }
    
    // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨ãƒ¡ã‚½ãƒƒãƒ‰
    // ...
}
```

**EF Coreè¨­å®š**:
```csharp
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<Employee>(entity =>
    {
        entity.HasKey(e => e.Id);
        entity.Property(e => e.FirstName).IsRequired().HasMaxLength(100);
        entity.Property(e => e.LastName).IsRequired().HasMaxLength(100);
        entity.Property(e => e.Email).IsRequired().HasMaxLength(255);
        
        // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
        entity.HasIndex(e => e.Email).IsUnique();
        
        // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        entity.HasOne(e => e.Department)
              .WithMany(d => d.Employees)
              .HasForeignKey(e => e.DepartmentId)
              .OnDelete(DeleteBehavior.SetNull);
    });
}
```

## 11. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæˆ¦ç•¥

### 11.1 .NET Aspire ã«ã‚ˆã‚‹çµ±åˆãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

**ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º**:
```bash
dotnet run --project src/AppHost
```

Aspire AppHostãŒä»¥ä¸‹ã‚’è‡ªå‹•çš„ã«å®Ÿè¡Œï¼š
1. SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æº–å‚™
2. ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•
3. ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼ã®æ§‹æˆ
4. Aspireãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®èµ·å‹•
5. OpenTelemetryã®æ§‹æˆ

### 11.2 ã‚³ãƒ³ãƒ†ãƒŠåŒ–ï¼ˆäºˆå®šï¼‰

**Dockerfileä¾‹ï¼ˆEmployeeService.APIï¼‰**:
```dockerfile
FROM mcr.microsoft.com/dotnet/aspnet:9.0 AS base
WORKDIR /app
EXPOSE 8080
EXPOSE 8081

FROM mcr.microsoft.com/dotnet/sdk:9.0 AS build
WORKDIR /src
COPY ["src/Services/EmployeeService/API/EmployeeService.API.csproj", "API/"]
COPY ["src/Services/EmployeeService/Application/EmployeeService.Application.csproj", "Application/"]
COPY ["src/Services/EmployeeService/Domain/EmployeeService.Domain.csproj", "Domain/"]
COPY ["src/Services/EmployeeService/Infrastructure/EmployeeService.Infrastructure.csproj", "Infrastructure/"]
RUN dotnet restore "API/EmployeeService.API.csproj"
COPY . .
WORKDIR "/src/API"
RUN dotnet build "EmployeeService.API.csproj" -c Release -o /app/build

FROM build AS publish
RUN dotnet publish "EmployeeService.API.csproj" -c Release -o /app/publish

FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "EmployeeService.API.dll"]
```

### 11.3 Azure ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆäºˆå®šï¼‰

**.NET Aspire Deployment**:
```bash
# Azure Container Apps ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
azd init
azd up
```

**å¿…è¦ãªAzureãƒªã‚½ãƒ¼ã‚¹**:
- Azure Container Apps
- Azure SQL Database
- Azure Key Vaultï¼ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ï¼‰
- Azure Monitorï¼ˆå¯è¦³æ¸¬æ€§ï¼‰
- Azure Application Insightsï¼ˆAPMï¼‰

**Aspire Manifestç”Ÿæˆ**:
```bash
dotnet run --project src/AppHost -- --output-path ./aspire-manifest.json
```

### 11.4 CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆäºˆå®šï¼‰

**GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹**:
```yaml
name: Deploy to Azure

on:
  push:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup .NET
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: '9.0.x'
      
      - name: Restore dependencies
        run: dotnet restore
      
      - name: Build
        run: dotnet build --no-restore
      
      - name: Test
        run: dotnet test --no-build --verbosity normal
      
      - name: Deploy to Azure
        run: azd deploy
        env:
          AZURE_CREDENTIALS: ${{ secrets.AZURE_CREDENTIALS }}
```

## 12. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### 12.1 ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã‚‹æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

å„ã‚µãƒ¼ãƒ“ã‚¹ã¯ç‹¬ç«‹ã—ã¦ã‚¹ã‚±ãƒ¼ãƒ«å¯èƒ½ï¼š

```yaml
# Azure Container Apps ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°è¨­å®šä¾‹
scale:
  minReplicas: 1
  maxReplicas: 10
  rules:
    - name: http-scaling
      http:
        metadata:
          concurrentRequests: "100"
```

**ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥**:
- EmployeeService: ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã«å¿œã˜ã¦è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«
- AuthService: ãƒ­ã‚°ã‚¤ãƒ³é »åº¦ã«å¿œã˜ã¦ã‚¹ã‚±ãƒ¼ãƒ«
- BlazorWeb: åŒæ™‚æ¥ç¶šæ•°ã«å¿œã˜ã¦ã‚¹ã‚±ãƒ¼ãƒ«

### 12.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ—ãƒ¼ãƒªãƒ³ã‚°

**EF Core æ¥ç¶šãƒ—ãƒ¼ãƒªãƒ³ã‚°**:
```csharp
builder.Services.AddDbContext<EmployeeDbContext>(options =>
{
    options.UseSqlServer(connectionString, sqlOptions =>
    {
        sqlOptions.EnableRetryOnFailure(
            maxRetryCount: 5,
            maxRetryDelay: TimeSpan.FromSeconds(30),
            errorNumbersToAdd: null);
    });
});
```

### 12.3 éåŒæœŸå‡¦ç†ã®æ´»ç”¨

**async/await ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```csharp
public async Task<IEnumerable<Employee>> GetAllEmployeesAsync()
{
    return await _dbContext.Employees
        .AsNoTracking()
        .ToListAsync();
}
```

### 12.4 ã‚¯ã‚¨ãƒªæœ€é©åŒ–

**AsNoTracking ã«ã‚ˆã‚‹èª­ã¿å–ã‚Šå°‚ç”¨ã‚¯ã‚¨ãƒªæœ€é©åŒ–**:
```csharp
var employees = await _context.Employees
    .AsNoTracking()
    .Include(e => e.Department)
    .ToListAsync();
```

**Select ã«ã‚ˆã‚‹å¿…è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿å–å¾—**:
```csharp
var employeeNames = await _context.Employees
    .Select(e => new { e.FirstName, e.LastName })
    .ToListAsync();
```

### 12.5 å°†æ¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„

**Redisã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°**:
```csharp
// é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
services.AddStackExchangeRedisCache(options =>
{
    options.Configuration = configuration["Redis:ConnectionString"];
});
```

**SignalR ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**:
```csharp
// å¾“æ¥­å“¡ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›´ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§UIã«é€šçŸ¥
await _hubContext.Clients.All.SendAsync("EmployeeUpdated", employee);
```

## 13. ä»Šå¾Œã®æŠ€è¡“çš„ãªæ‹¡å¼µäºˆå®š

### 13.1 èªè¨¼ãƒ»èªå¯ã®å¼·åŒ–

**å„ªå…ˆåº¦: é«˜**

1. **JWT ãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼**
   - ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹èªè¨¼
   - ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
   - ãƒˆãƒ¼ã‚¯ãƒ³å¤±åŠ¹ç®¡ç†

2. **Microsoft Entra ID çµ±åˆ**
   - OAuth 2.0 / OpenID Connect
   - ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³ï¼ˆSSOï¼‰
   - å¤šè¦ç´ èªè¨¼ï¼ˆMFAï¼‰
   - æ¡ä»¶ä»˜ãã‚¢ã‚¯ã‚»ã‚¹

3. **API ã‚­ãƒ¼èªè¨¼**
   - ã‚µãƒ¼ãƒ“ã‚¹é–“èªè¨¼
   - ãƒ¬ãƒ¼ãƒˆåˆ¶é™
   - APIä½¿ç”¨é‡è¿½è·¡

### 13.2 ãƒ‡ãƒ¼ã‚¿ç®¡ç†

**å„ªå…ˆåº¦: é«˜**

1. **Redis ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°**
   - é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
   - åˆ†æ•£ãƒ­ãƒƒã‚¯

2. **Azure SQL Database ç§»è¡Œ**
   - é«˜å¯ç”¨æ€§
   - è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
   - ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### 13.3 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°

**å„ªå…ˆåº¦: ä¸­**

1. **Azure Service Bus / RabbitMQ**
   - éåŒæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°
   - ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
   - ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–“ã®ç–çµåˆ

2. **SignalR**
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥
   - ãƒ©ã‚¤ãƒ–ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
   - ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½

### 13.4 APIç®¡ç†

**å„ªå…ˆåº¦: ä¸­**

1. **API Gateway**
   - Azure API Management / YARP
   - ãƒ¬ãƒ¼ãƒˆåˆ¶é™
   - APIãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°
   - ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

2. **GraphQL**
   - æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿å–å¾—
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸»å°ã®ã‚¯ã‚¨ãƒª
   - Hot Chocolateçµ±åˆ

### 13.5 å¯è¦³æ¸¬æ€§ã®å¼·åŒ–

**å„ªå…ˆåº¦: ä½**

1. **Application Insights**
   - è©³ç´°ãªAPM
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æ

2. **ã‚¢ãƒ©ãƒ¼ãƒˆã¨é€šçŸ¥**
   - ã—ãã„å€¤ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ©ãƒ¼ãƒˆ
   - Slack/Teamsé€šçŸ¥
   - ã‚ªãƒ³ã‚³ãƒ¼ãƒ«ç®¡ç†

### 13.6 ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£

**å„ªå…ˆåº¦: ä½**

1. **ã‚³ãƒ³ãƒ†ãƒŠåŒ–**
   - DockeråŒ–
   - Kubernetes ãƒ‡ãƒ—ãƒ­ã‚¤
   - Helm ãƒãƒ£ãƒ¼ãƒˆ

2. **Infrastructure as Code**
   - Terraform / Bicep
   - ç’°å¢ƒã®è‡ªå‹•ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°
   - è¨­å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

## 14. å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### å†…éƒ¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦](architecture.md) - é«˜ãƒ¬ãƒ™ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- [é–‹ç™ºã‚¬ã‚¤ãƒ‰](development-guide.md) - é–‹ç™ºæ‰‹é †ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- [Aspireãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰](aspire-dashboard.md) - ç›£è¦–ã¨ãƒ‡ãƒãƒƒã‚°
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†](database.md) - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¯ã‚¨ãƒªæœ€é©åŒ–
- [é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…ã‚¬ã‚¤ãƒ‰](notification-service.md) - ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- [èªå¯å®Ÿè£…](authorization-implementation.md) - ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- [Entra IDçµ±åˆè¨­è¨ˆ](entra-id-integration-design.md) - ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºèªè¨¼çµ±åˆ

### å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹
- [.NET 10 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://learn.microsoft.com/dotnet/core/whats-new/dotnet-10)
- [.NET Aspire ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://learn.microsoft.com/dotnet/aspire/)
- [Entity Framework Core](https://learn.microsoft.com/ef/core/)
- [OpenTelemetry .NET](https://opentelemetry.io/docs/languages/net/)
- [MudBlazor](https://mudblazor.com/)
- [ASP.NET Core Identity](https://learn.microsoft.com/aspnet/core/security/authentication/identity)

## 15. ã¾ã¨ã‚

æœ¬å¾“æ¥­å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¯ã€æœ€æ–°ã®.NET 10ã¨.NET Aspireã‚’æ´»ç”¨ã—ãŸã€ãƒ¢ãƒ€ãƒ³ãªãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç‰¹å¾´**:
- âœ… ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹ç–çµåˆã¨ç‹¬ç«‹æ€§
- âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§
- âœ… .NET Aspireã«ã‚ˆã‚‹çµ±åˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨å¯è¦³æ¸¬æ€§
- âœ… OpenTelemetryã«ã‚ˆã‚‹å®Œå…¨ãªåˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°
- âœ… ASP.NET Core Identityã«ã‚ˆã‚‹èªè¨¼ãƒ»èªå¯
- âœ… Entity Framework Coreã«ã‚ˆã‚‹å‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
- âœ… Blazor Web Appã«ã‚ˆã‚‹ãƒ¢ãƒ€ãƒ³ãªUI

**ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³**:
- âœ… åŸºæœ¬çš„ãªãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ
- âœ… CRUDæ“ä½œã®å®Ÿè£…
- âœ… ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- âœ… å®Œå…¨ãªå¯è¦³æ¸¬æ€§ï¼ˆãƒˆãƒ¬ãƒ¼ã‚¹ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ­ã‚°ï¼‰
- âœ… ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- âœ… SQLiteã«ã‚ˆã‚‹é–‹ç™ºç’°å¢ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

**ä»Šå¾Œã®æ‹¡å¼µ**:
- ğŸ”„ JWT ãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼
- ğŸ”„ Microsoft Entra ID çµ±åˆ
- ğŸ”„ Redis ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- ğŸ”„ Azure SQL Database ç§»è¡Œ
- ğŸ”„ SignalR ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡
- ğŸ”„ ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã¨Kubernetes ãƒ‡ãƒ—ãƒ­ã‚¤

ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã®æˆé•·ã‚’è¦‹æ®ãˆãŸè¨­è¨ˆã¨ãªã£ã¦ãŠã‚Šã€æ®µéšçš„ãªæ©Ÿèƒ½æ‹¡å¼µãŒå¯èƒ½ã§ã™ã€‚

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.1  
**æœ€çµ‚æ›´æ–°æ—¥**: 2025-11-15  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: .NET 10.0, Aspire 13.0.0
